(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0f7a":function(e,t,a){},"76e2":function(e,t,a){"use strict";var o=a("0f7a"),n=a.n(o);n.a},"9f21":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("96cf");var o=a("c973"),n=a.n(o),s=a("cf57"),r=a("4515"),i=a("af0d"),l={data:function(){return{db:{}}},created:function(){this.db=new i["a"]("db")},methods:{addToCollection:function(e,t){this.db.collection(e).add(t).then((function(e){console.log("Agregado")})).catch((function(e){console.log(e)}))},getDataCollection:function(e){var t=arguments,a=this;return n()(regeneratorRuntime.mark((function o(){var n,s,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=t.length>1&&void 0!==t[1]?t[1]:"",s=t.length>2&&void 0!==t[2]?t[2]:"",r=[],""!==n||""!==s){o.next=8;break}return o.next=6,a.db.collection(e).get().then((function(e){r=e}));case 6:o.next=10;break;case 8:return o.next=10,a.db.collection(e).orderBy(n,s).get().then((function(e){r=e}));case 10:return o.abrupt("return",r);case 11:case"end":return o.stop()}}),o)})))()},getDataCollectionById:function(e,t){var a=arguments,o=this;return n()(regeneratorRuntime.mark((function n(){var s,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=a.length>2&&void 0!==a[2]?a[2]:"",r=a.length>3&&void 0!==a[3]?a[3]:"",i=[],""!==s||""!==r){n.next=8;break}return n.next=6,o.db.collection(e).doc({id:t}).get().then((function(e){i=e}));case 6:n.next=10;break;case 8:return n.next=10,o.db.collection(e).doc({id:t}).orderBy(s,r).get().then((function(e){i=e}));case 10:return n.abrupt("return",i);case 11:case"end":return n.stop()}}),n)})))()},deleteDataCollection:function(e,t){var a=this;return n()(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.db.collection(e).doc({id:t}).delete().then((function(e){console.log("Delete successful, now do something.")})).catch((function(e){console.log(e)}));case 1:case"end":return o.stop()}}),o)})))()},updateDataOnCollectionById:function(e,t,a){var o=this;return n()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o.db.collection(e).doc({id:t}).set(a).then((function(e){o.alert("positive","Datos actualizados correctamente")})).catch((function(e){console.log(e)}));case 1:case"end":return n.stop()}}),n)})))()},deleteDatabase:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.db.delete();case 1:case"end":return t.stop()}}),t)})))()},isNumber:function(e){var t=e.replaceAll(".",""),a=t.replaceAll("-","");return/^\d+$/.test(a)},miles:function(e){if(e&&void 0!==e){"number"===typeof e&&(e=e.toString());var t=e.replace(/\./g,"");if(this.isNumber(e)){t=parseInt(t);var a={style:"decimal",useGrouping:!0};t=t.toLocaleString("es",a)}else t="";return t}return""},milesInput:function(e,t){var a=this.miles(e.target.value);e.target.value=a,t.valor=a,this.$emit("input",a)},goTo:function(e){this.$router.push("/"+e).catch((function(e){e._name}))},alert:function(e,t){this.$q.notify({message:t,color:e})},activateLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a={message:e};1===t?a.spinner=s["a"]:2===t&&(a.spinner=r["a"]),this.$q.loading.show(a)},disableLoading:function(){this.$q.loading.hide()}}}},f742:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[e._v("\n            Actualmente el análisis se encuentra diseñado para el año actual "+e._s(e.date.formatDate(new Date,"YYYY"))+".\n            "),e.valuesMonthSelected?a("div",[a("q-select",{attrs:{options:e.options,label:"Mes",required:""},on:{input:function(t){return e.init()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:e.monthSelected,callback:function(t){e.monthSelected=t},expression:"monthSelected"}}),a("br"),a("highcharts",{attrs:{options:e.chartOptionsGastosPorDiaDelMes}}),a("highcharts",{attrs:{options:e.chartOptionsGastosPorCategoria}}),a("br"),a("h6",{staticClass:"text-h6 text-center"},[e._v("Tabla comparativa Ingresos - Gastos")]),a("q-table",{staticClass:"table",attrs:{dense:e.$q.screen.lt.md,data:e.dataCompativeTable,columns:e.columnsComparativeTable,"row-key":"name","rows-per-page-options":[0]},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"detail",attrs:{props:t}},[e._v("\n                        "+e._s(t.row.detail.name)+"\n                        "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.row.outcoming,expression:"props.row.outcoming"}],class:"table-detail-container detail-"+t.row.key}),a("br",{directives:[{name:"show",rawName:"v-show",value:t.row.outcoming,expression:"props.row.outcoming"}]}),a("a",{directives:[{name:"show",rawName:"v-show",value:t.row.outcoming,expression:"props.row.outcoming"}],class:"show-btn show-more-btn show-more-btn-key-"+t.row.key,on:{click:function(a){return e.showMore(t.row)}}},[a("q-icon",{attrs:{name:"visibility"}}),e._v("Detalle\n                        ")],1),a("a",{directives:[{name:"show",rawName:"v-show",value:t.row.outcoming,expression:"props.row.outcoming"}],class:"show-btn show-less-btn show-less-btn-key-"+t.row.key,on:{click:function(a){return e.showLess(t.row)}}},[a("q-icon",{attrs:{name:"visibility_off"}}),e._v("Ocultar\n                        ")],1)]),a("q-td",{key:"incoming",attrs:{props:t}},[e._v("\n                        "+e._s(e.miles(t.row.incoming))+"\n                      ")]),a("q-td",{key:"outcoming",attrs:{props:t}},[e._v("\n                        "+e._s(e.miles(t.row.outcoming))+"\n                      ")])],1)]}},{key:"bottom-row",fn:function(){return[a("q-tr",[a("q-td",{key:"detail",staticClass:"text-center"},[a("b",[e._v("Total")])]),a("q-td",{key:"incoming"}),a("q-td",{key:"outcoming",staticClass:"text-center"},[a("b",[e._v(e._s(e.miles(e.totalComparativeTable)))])])],1)]},proxy:!0}],null,!1,2288184663)}),a("br"),a("highcharts",{attrs:{options:e.chartOptionsIngresosVsGastos}})],1):e._e()]),a("div",{staticClass:"col-1"})])])])},n=[],s=(a("7db0"),a("4160"),a("159b"),a("96cf"),a("c973")),r=a.n(s),i=a("9f21"),l=a("4452"),c=a("bd4c"),u={name:"analysis",mixins:[i["a"]],components:{highcharts:l["Chart"]},data:function(){return{totalIngresosComparative:0,totalGastosComparative:0,date:c["b"],valuesMonthSelected:null,dataTiposPorMes:[],totalComparativeTable:0,columnsComparativeTable:[{name:"detail",align:"center",label:"Nombre",field:"detail",sortable:!0},{name:"incoming",align:"center",label:"Debitos",field:"incoming",sortable:!0},{name:"outcoming",align:"center",label:"Creditos",field:"outcoming",sortable:!0}],dataCompativeTable:[],monthSelected:{value:0,label:"Enero"},options:[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],dataTipos:[],dataGastos:[],chartOptionsGastosPorDiaDelMes:{chart:{type:"area"},title:{text:"Gastos este mes"},xAxis:{title:{text:"Dias"},categories:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},yAxis:{title:{text:"Valor"}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1},area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#E9BC36"]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{name:"Gastos",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],color:"#E9BC36"}]},chartOptionsGastosPorCategoria:{chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}: {point.percentage:.1f}%"},showInLegend:!0}},colorAxis:{minColor:"#F2f2f2",maxColor:"#E9BC36"},series:[{colorByPoint:!0,data:[{name:"",value:"1",color:"#E9BC36"}]}],title:{text:"Gastos por categoria"}},chartOptionsIngresosVsGastos:{chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}: {point.percentage:.1f}%"},showInLegend:!0}},colorAxis:{minColor:"#F2f2f2",maxColor:"#E9BC36"},series:[{colorByPoint:!0,data:[{name:"",value:"1",color:"#E9BC36"}]}],title:{text:"Ingresos vs Gastos"}}}},mounted:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=c["b"].formatDate(new Date,"M"),o=e.options.find((function(e){return e.value===parseInt(a)})),e.monthSelected=o,t.next=5,e.init();case 5:case"end":return t.stop()}}),t)})))()},methods:{init:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:e.organiceByType(),e.organiceByMonth(),e.fillTable(),e.generateChartComparative();case 6:case"end":return t.stop()}}),t)})))()},fillTable:function(){this.dataCompativeTable=[],this.totalComparativeTable=0;for(var e=this.valuesMonthSelected.incoming,t=this.dataTiposPorMes,a=0;a<e.length;a++)this.dataCompativeTable.push({detail:{name:e[a].nombre},incoming:e[a].valor,outcoming:0}),this.totalIngresosComparative+=parseInt(e[a].valor);for(var o=0;o<t.length;o++)this.dataCompativeTable.push({detail:{name:t[o].nombre,gastos:t[o].gastos},outcoming:t[o].valor,incoming:0}),this.totalGastosComparative+=parseInt(t[o].valor);var n=0;this.dataCompativeTable.forEach((function(e){n++,e.key=n})),this.totalComparativeTable=parseInt(this.totalIngresosComparative)-parseInt(this.totalGastosComparative)},getData:function(){var e=this;return r()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDataCollection("tipos","id","desc");case 2:return e.dataTipos=t.sent,t.next=5,e.getDataCollection("gastos","id","desc");case 5:return e.dataGastos=t.sent,t.next=8,e.getDataCollection("ingresos","id","desc");case 8:e.dataIngresos=t.sent,e.valuesMonthSelected=e.selectMonth();case 10:case"end":return t.stop()}}),t)})))()},organiceByType:function(){this.chartOptionsGastosPorCategoria.series[0].data=[];for(var e=0;e<this.dataTipos.length;e++){this.dataTiposPorMes[e]={id:this.dataTipos[e].id,valor:0,gastos:[],nombre:this.dataTipos[e].nombre,color:this.dataTipos[e].color};for(var t=0;t<this.valuesMonthSelected.outcoming.length;t++)this.dataTiposPorMes[e].id===this.valuesMonthSelected.outcoming[t].tipo.id&&(this.dataTiposPorMes[e].valor+=parseInt(this.valuesMonthSelected.outcoming[t].valor),this.dataTiposPorMes[e].gastos.push({nombre:this.valuesMonthSelected.outcoming[t].nombre,valor:this.valuesMonthSelected.outcoming[t].valor}));this.chartOptionsGastosPorCategoria.series[0].data.push({name:this.dataTiposPorMes[e].nombre,y:this.dataTiposPorMes[e].valor,color:this.dataTiposPorMes[e].color})}},generateChartComparative:function(){this.chartOptionsIngresosVsGastos.series[0].data=[],this.chartOptionsIngresosVsGastos.series[0].data.push({name:"Ingresos",y:this.totalIngresosComparative,color:"#21BA45"}),this.chartOptionsIngresosVsGastos.series[0].data.push({name:"Gastos",y:this.totalGastosComparative,color:"#FF0000"})},organiceByMonth:function(){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<this.valuesMonthSelected.outcoming.length;t++){var a=new Date(this.valuesMonthSelected.outcoming[t].fecha),o=a.getUTCDate()-1;0===e[o]?e[o]=parseInt(this.valuesMonthSelected.outcoming[t].valor):e[o]+=parseInt(this.valuesMonthSelected.outcoming[t].valor)}this.chartOptionsGastosPorDiaDelMes.series[0].data=e},selectMonth:function(){var e=[],t=[];c["b"].formatDate(new Date,"M");for(var a=0;a<this.dataGastos.length;a++)parseInt(c["b"].formatDate(new Date(this.dataGastos[a].fecha),"M"))===this.monthSelected.value&&e.push(this.dataGastos[a]);for(var o=0;o<this.dataIngresos.length;o++)parseInt(c["b"].formatDate(new Date(this.dataIngresos[o].fecha),"M"))===this.monthSelected.value&&t.push(this.dataIngresos[o]);return{incoming:t,outcoming:e}},showMore:function(e){var t=this,a=document.getElementsByClassName("detail-"+e.key)[0],o=document.getElementsByClassName("show-more-btn-key-"+e.key)[0],n=document.getElementsByClassName("show-less-btn-key-"+e.key)[0];o.style.display="none",n.style.display="block";var s=document.createElement("table");s.style.marginLeft="auto",s.style.marginRight="auto",e.detail.gastos.forEach((function(e){var a=document.createElement("tr"),o=document.createElement("td"),n=document.createElement("td");o.innerText=e.nombre,n.innerText=t.miles(e.valor),a.style.height="auto",a.appendChild(o),a.appendChild(n),s.appendChild(a)})),a.appendChild(s),a.style.display="block"},showLess:function(e){var t=document.getElementsByClassName("detail-"+e.key)[0],a=document.getElementsByClassName("show-more-btn-key-"+e.key)[0],o=document.getElementsByClassName("show-less-btn-key-"+e.key)[0];a.style.display="block",o.style.display="none",t.innerHTML="",t.style.display="none"}}},d=u,h=(a("76e2"),a("2877")),m=a("9989"),p=a("ddd8"),g=a("0016"),v=a("eaac"),f=a("bd08"),b=a("db86"),w=a("eebe"),y=a.n(w),C=Object(h["a"])(d,o,n,!1,null,"ca482fbe",null);t["default"]=C.exports;y()(C,"components",{QPage:m["a"],QSelect:p["a"],QIcon:g["a"],QTable:v["a"],QTr:f["a"],QTd:b["a"]})}}]);