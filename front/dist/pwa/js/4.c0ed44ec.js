(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{1077:function(e,t,n){"use strict";var a=n("9d01"),o=n.n(a);o.a},8541:function(e,t,n){"use strict";var a=n("d19a"),o=n.n(a);o.a},"9ba7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",[n("div",{staticClass:"q-pa-md"},[n("div",{staticClass:"row"},[e.token?n("div",{staticClass:"col-12 container"},[n("q-form",{on:{submit:e.save}},[n("q-input",{attrs:{color:"green",label:"Nombre"},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"description"}})]},proxy:!0}],null,!1,736773578),model:{value:e.recordatorio.nombre,callback:function(t){e.$set(e.recordatorio,"nombre",t)},expression:"recordatorio.nombre"}}),n("br"),n("q-input",{attrs:{type:"textarea",color:"green",label:"Detalle"},model:{value:e.recordatorio.detalle,callback:function(t){e.$set(e.recordatorio,"detalle",t)},expression:"recordatorio.detalle"}}),n("br"),n("DateComponent",{attrs:{label:"Hora para el correo",onlyHour:!0},model:{value:e.hora,callback:function(t){e.hora=t},expression:"hora"}}),n("q-select",{attrs:{options:e.options,label:"Frecuencia",required:""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"alarm_on"}})]},proxy:!0}],null,!1,131109409),model:{value:e.recordatorio.frecuencia,callback:function(t){e.$set(e.recordatorio,"frecuencia",t)},expression:"recordatorio.frecuencia"}}),n("br"),n("DateComponent",{directives:[{name:"show",rawName:"v-show",value:e.recordatorio.frecuencia&&"onceamonth"===e.recordatorio.frecuencia.value,expression:"recordatorio.frecuencia && recordatorio.frecuencia.value === 'onceamonth'"}],attrs:{label:"Dia para el correo",onlyDay:!0},model:{value:e.fecha,callback:function(t){e.fecha=t},expression:"fecha"}}),n("br"),e._v("\n                *Si seleccionas el último día del mes y el mes actual no llega hasta ese día (ejemplo 31, cuando el mes es de 30), la notificación llegará el último día del mes actual.\n                "),n("q-btn",{staticClass:"full-width",attrs:{label:"Agregar",type:"submit",color:"positive"}})],1),n("br"),n("q-separator",{attrs:{inset:""}}),n("br"),n("FullCalendar",{ref:"calendar",attrs:{events:e.data,config:e.config}})],1):n("div",{staticClass:"col-12 container"},[e._v("\n            Primero tienes que configurar un correo electrónico.\n            "),n("q-btn",{staticClass:"full-width",attrs:{label:"Ir a configuración",color:"primary"},on:{click:function(t){return e.goTo("settings")}}})],1)])])])},o=[],r=(n("c975"),n("fb6a"),n("b0c0"),n("ded3")),i=n.n(r),c=(n("96cf"),n("c973")),s=n.n(c),l=(n("fa91"),n("9f21")),u=n("bd4c"),d=n("c9c4"),f=n("758b"),h={store:function(e){return Object(f["a"])().post("reminders",e)},index:function(e){return Object(f["a"])().get("reminders/"+e)},update:function(e){return Object(f["a"])().put("reminders/"+e.id,e)},delete:function(e){return Object(f["a"])().delete("reminders/"+e)}},m=n("25cc"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[n("q-card",{staticClass:"q-dialog-plugin barra"},[n("div",{staticClass:"form"},[n("div",{staticClass:"text-h6"},[e._v("Información del recordatorio"),n("q-icon",{attrs:{name:"timelapse"}})],1),n("b",[e._v("Nombre:")]),e._v(" "+e._s(e.reminder.title)),n("br"),n("b",[e._v("Detalle:")]),n("br"),e._v("\n          "+e._s(e.reminder.description)),n("br"),n("q-separator")],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{color:"negative",label:"Delete"},on:{click:e.onDeleteClick}}),n("q-btn",{attrs:{color:"primary",label:"OK"},on:{click:e.onOKClick}})],1)],1)],1)},b=[],g={data:function(){return{}},props:{reminder:{}},created:function(){},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",this.reminder),this.hide()},onDeleteClick:function(){this.$emit("cancel",this.reminder),this.hide()},onCancelClick:function(){this.hide()}}},v=g,y=(n("1077"),n("2877")),D=n("24e8"),k=n("f09f"),w=n("0016"),x=n("eb85"),q=n("4b7e"),C=n("9c40"),M=n("eebe"),_=n.n(M),S=Object(y["a"])(v,p,b,!1,null,"a7972adc",null),H=S.exports;_()(S,"components",{QDialog:D["a"],QCard:k["a"],QIcon:w["a"],QSeparator:x["a"],QCardActions:q["a"],QBtn:C["a"]});var Y={frecuencia:{value:"everyday",label:"Todos los días"}},$={name:"incomings",mixins:[l["a"]],components:{DateComponent:d["a"],FullCalendar:m["a"]},data:function(){return{recordatorio:Y,data:[],columns:[{name:"nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"valor",align:"center",label:"Valor",field:"valor",sortable:!0},{name:"fecha",align:"center",label:"Fecha",field:"fecha",sortable:!0},{name:"ops",align:"center",label:"Opciones",field:"ops",sortable:!0}],options:[{value:"everyday",label:"Todos los días"},{value:"onceamonth",label:"Una vez por mes"}],fecha:u["b"].formatDate(Date.now(),"DD"),hora:u["b"].formatDate(Date.now(),"HH:mm"),token:JSON.parse(localStorage.getItem("user")).token,config:{}}},created:function(){this.getCalendarInfo(),this.getData()},methods:{getData:function(){var e=this;return s()(regeneratorRuntime.mark((function t(){var n,a,o,r,c,s,l,d,f,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h.index(e.token);case 2:for(n=t.sent,a=n.data.reminders,o=u["b"].formatDate(new Date,"YYYY"),r=u["b"].formatDate(new Date,"MM"),e.data=[],c=0;c<a.length;c++)if(s=a[c].hour.substring(0,a[c].hour.indexOf(":")),l=a[c].hour.slice(a[c].hour.indexOf(":")+1),d={title:a[c].name,start:u["b"].formatDate(new Date(o,r-1,a[c].day,s,l),"YYYY-MM-DD HH:mm"),description:a[c].detail,_id:a[c].id},"onceamonth"===a[c].frequency)e.data.push(d);else for(f=1;f<31;f++)m=u["b"].addToDate(d.start,{days:f}),p=i()({},d),p.start=u["b"].formatDate(m,"YYYY-MM-DD HH:mm"),e.data.push(p);console.log(e.data);case 9:case"end":return t.stop()}}),t)})))()},getCalendarInfo:function(){var e=this,t={months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],daysLong:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],days:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],today:"Hoy",month:"Mes",week:"Semana",day:"Día",list:"Lista"};this.config={defaultView:"month",editable:!1,displayEventTime:!1,header:{left:"prev,today,next",right:"month,listMonth,basicWeek,basicDay"},buttonText:{today:t.today,month:t.month,week:t.week,day:t.day,listMonth:t.list},allDayDefault:!0,height:"auto",monthNames:t.months,monthNamesShort:t.monthsShort,dayNames:t.daysLong,dayNamesShort:t.days,eventTextColor:"white",eventClick:function(t){e.showEvent(t)},eventMouseover:function(e,t,n){},eventMouseout:function(e,t,n){}}},showEvent:function(e){var t=this;this.$q.dialog({component:H,parent:this,reminder:e}).onOk((function(){})).onCancel((function(){t.activateLoading(),h.delete(e._id).then((function(e){t.alert("positive","Recordatorio eliminado"),t.getData(),t.disableLoading()})).catch((function(e){t.alert("negative",e.response.data.message),t.disableLoading()}))})).onDismiss((function(){}))},save:function(){var e=this;if(""!==this.recordatorio.nombre){var t=i()(i()({},this.recordatorio),{},{frequency:this.recordatorio.frecuencia.value,day:this.fecha,hour:this.hora,token:this.token});this.activateLoading(),h.store(t).then((function(){e.recordatorio={frecuencia:{value:"everyday",label:"Todos los días"}},e.alert("positive","Recordatorio agregado"),e.getData(),e.disableLoading()})).catch((function(t){e.alert("negative",t.response.data.message),e.disableLoading()}))}}}},E=$,O=n("9989"),I=n("0378"),Q=n("27f9"),R=n("ddd8"),L=Object(y["a"])(E,a,o,!1,null,null,null);t["default"]=L.exports;_()(L,"components",{QPage:O["a"],QForm:I["a"],QInput:Q["a"],QIcon:w["a"],QSelect:R["a"],QBtn:C["a"],QSeparator:x["a"]})},"9d01":function(e,t,n){},"9f21":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("96cf");var a=n("c973"),o=n.n(a),r=n("cf57"),i=n("4515"),c=n("af0d"),s={data:function(){return{db:{}}},created:function(){this.db=new c["a"]("db")},methods:{addToCollection:function(e,t){this.db.collection(e).add(t).then((function(e){console.log("Agregado")})).catch((function(e){console.log(e)}))},getDataCollection:function(e){var t=arguments,n=this;return o()(regeneratorRuntime.mark((function a(){var o,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=t.length>1&&void 0!==t[1]?t[1]:"",r=t.length>2&&void 0!==t[2]?t[2]:"",i=[],""!==o||""!==r){a.next=8;break}return a.next=6,n.db.collection(e).get().then((function(e){i=e}));case 6:a.next=10;break;case 8:return a.next=10,n.db.collection(e).orderBy(o,r).get().then((function(e){i=e}));case 10:return a.abrupt("return",i);case 11:case"end":return a.stop()}}),a)})))()},getDataCollectionById:function(e,t){var n=arguments,a=this;return o()(regeneratorRuntime.mark((function o(){var r,i,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r=n.length>2&&void 0!==n[2]?n[2]:"",i=n.length>3&&void 0!==n[3]?n[3]:"",c=[],""!==r||""!==i){o.next=8;break}return o.next=6,a.db.collection(e).doc({id:t}).get().then((function(e){c=e}));case 6:o.next=10;break;case 8:return o.next=10,a.db.collection(e).doc({id:t}).orderBy(r,i).get().then((function(e){c=e}));case 10:return o.abrupt("return",c);case 11:case"end":return o.stop()}}),o)})))()},deleteDataCollection:function(e,t){var n=this;return o()(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n.db.collection(e).doc({id:t}).delete().then((function(e){console.log("Delete successful, now do something.")})).catch((function(e){console.log(e)}));case 1:case"end":return a.stop()}}),a)})))()},updateDataOnCollectionById:function(e,t,n){var a=this;return o()(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.db.collection(e).doc({id:t}).set(n).then((function(e){a.alert("positive","Datos actualizados correctamente")})).catch((function(e){console.log(e)}));case 1:case"end":return o.stop()}}),o)})))()},deleteDatabase:function(){var e=this;return o()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.db.delete();case 1:case"end":return t.stop()}}),t)})))()},isNumber:function(e){var t=e.replaceAll(".",""),n=t.replaceAll("-","");return/^\d+$/.test(n)},miles:function(e){if(e&&void 0!==e){"number"===typeof e&&(e=e.toString());var t=e.replace(/\./g,"");if(this.isNumber(e)){t=parseInt(t);var n={style:"decimal",useGrouping:!0};t=t.toLocaleString("es",n)}else t="";return t}return""},milesInput:function(e,t){var n=this.miles(e.target.value);e.target.value=n,t.valor=n,this.$emit("input",n)},goTo:function(e){this.$router.push("/"+e).catch((function(e){e._name}))},alert:function(e,t){this.$q.notify({message:t,color:e})},activateLoading:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={message:e};1===t?n.spinner=r["a"]:2===t&&(n.spinner=i["a"]),this.$q.loading.show(n)},disableLoading:function(){this.$q.loading.hide()},generateRand:function(){return Math.random().toString(36).substr(2)},generateToken:function(){return this.generateRand()+this.generateRand()}}}},c9c4:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{color:"green",label:e.label,required:"",rules:[function(e){return!!e||"Tienes que llenar este campo"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterEventEmit()},input:e.handleInput},scopedSlots:e._u([e.onlyHour?null:{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:e.onlyDay?"DD":"YYYY-MM-DD HH:mm"},on:{input:e.handleInput},model:{value:e.fecha,callback:function(t){e.fecha=t},expression:"fecha"}})],1)],1)]},proxy:!0},e.onlyDay?null:{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:e.onlyHour?"HH:mm":"YYYY-MM-DD HH:mm",format24h:""},on:{input:e.handleInput},model:{value:e.fecha,callback:function(t){e.fecha=t},expression:"fecha"}})],1)],1)]},proxy:!0}],null,!0),model:{value:e.fecha,callback:function(t){e.fecha=t},expression:"fecha"}})},o=[],r={name:"DateComponent",props:["value","enterEventParams","onlyHour","onlyDay","label"],data:function(){return{fecha:this.value}},methods:{handleInput:function(e){this.$emit("input",this.fecha)},enterEventEmit:function(){this.enterEventParams&&this.$emit("enterEvent",this.enterEventParams.scope,this.enterEventParams.row,this.enterEventParams.field)}}},i=r,c=(n("8541"),n("2877")),s=n("27f9"),l=n("0016"),u=n("7cbe"),d=n("52ee"),f=n("ca78"),h=n("eebe"),m=n.n(h),p=Object(c["a"])(i,a,o,!1,null,"417e8582",null);t["a"]=p.exports;m()(p,"components",{QInput:s["a"],QIcon:l["a"],QPopupProxy:u["a"],QDate:d["a"],QTime:f["a"]})},d19a:function(e,t,n){}}]);