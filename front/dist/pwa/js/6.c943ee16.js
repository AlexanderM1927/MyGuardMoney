(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"9f21":function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("96cf");var o=a("c973"),n=a.n(o),r=a("cf57"),s=a("4515"),i=a("af0d"),l={data:function(){return{db:{}}},created:function(){this.db=new i["a"]("db")},methods:{addToCollection:function(t,e){this.db.collection(t).add(e).then((function(t){console.log("Agregado")})).catch((function(t){console.log(t)}))},getDataCollection:function(t){var e=arguments,a=this;return n()(regeneratorRuntime.mark((function o(){var n,r,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n=e.length>1&&void 0!==e[1]?e[1]:"",r=e.length>2&&void 0!==e[2]?e[2]:"",s=[],""!==n||""!==r){o.next=8;break}return o.next=6,a.db.collection(t).get().then((function(t){s=t}));case 6:o.next=10;break;case 8:return o.next=10,a.db.collection(t).orderBy(n,r).get().then((function(t){s=t}));case 10:return o.abrupt("return",s);case 11:case"end":return o.stop()}}),o)})))()},getDataCollectionById:function(t,e){var a=arguments,o=this;return n()(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:"",s=a.length>3&&void 0!==a[3]?a[3]:"",i=[],""!==r||""!==s){n.next=8;break}return n.next=6,o.db.collection(t).doc({id:e}).get().then((function(t){i=t}));case 6:n.next=10;break;case 8:return n.next=10,o.db.collection(t).doc({id:e}).orderBy(r,s).get().then((function(t){i=t}));case 10:return n.abrupt("return",i);case 11:case"end":return n.stop()}}),n)})))()},deleteDataCollection:function(t,e){var a=this;return n()(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:a.db.collection(t).doc({id:e}).delete().then((function(t){console.log("Delete successful, now do something.")})).catch((function(t){console.log(t)}));case 1:case"end":return o.stop()}}),o)})))()},updateDataOnCollectionById:function(t,e,a){var o=this;return n()(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:o.db.collection(t).doc({id:e}).set(a).then((function(t){o.alert("positive","Datos actualizados correctamente")})).catch((function(t){console.log(t)}));case 1:case"end":return n.stop()}}),n)})))()},deleteDatabase:function(){var t=this;return n()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.db.delete();case 1:case"end":return e.stop()}}),e)})))()},isNumber:function(t){var e=t.replaceAll(".","");return/^\d+$/.test(e)},miles:function(t){if(t&&void 0!==t){"number"===typeof t&&(t=t.toString());var e=t.replace(/\./g,"");if(this.isNumber(t)){if(!isNaN(e)){e=parseInt(e);var a={style:"decimal",useGrouping:!0};e=e.toLocaleString("es",a)}}else e="",console.log("numfirstif",e);return e}return""},milesInput:function(t,e){var a=this.miles(t.target.value);t.target.value=a,e.valor=a,this.$emit("input",a)},goTo:function(t){this.$router.push("/"+t).catch((function(t){t._name}))},alert:function(t,e){this.$q.notify({message:e,color:t})},activateLoading:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a={message:t};1===e?a.spinner=r["a"]:2===e&&(a.spinner=s["a"]),this.$q.loading.show(a)},disableLoading:function(){this.$q.loading.hide()}}}},f742:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-1"}),a("div",{staticClass:"col-10 container"},[t._v("\n            Actualmente el análisis se encuentra diseñado para el año actual "+t._s(t.date.formatDate(new Date,"YYYY"))+".\n            "),t.valuesMonthSelected?a("div",[a("q-select",{attrs:{options:t.options,label:"Mes",required:""},on:{input:function(e){return t.init()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"event"}})]},proxy:!0}],null,!1,3703588864),model:{value:t.monthSelected,callback:function(e){t.monthSelected=e},expression:"monthSelected"}}),a("br"),a("highcharts",{attrs:{options:t.chartOptionsGastosPorDiaDelMes}}),a("highcharts",{attrs:{options:t.chartOptionsGastosPorCategoria}}),a("br"),a("h6",{staticClass:"text-h6 text-center"},[t._v("Tabla comparativa Ingresos - Gastos")]),a("q-table",{staticClass:"table",attrs:{dense:t.$q.screen.lt.md,data:t.dataCompativeTable,columns:t.columnsComparativeTable,"row-key":"name","rows-per-page-options":[0]},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"detail",attrs:{props:e}},[t._v("\n                        "+t._s(e.row.detail)+"\n                      ")]),a("q-td",{key:"incoming",attrs:{props:e}},[t._v("\n                        "+t._s(t.miles(e.row.incoming))+"\n                      ")]),a("q-td",{key:"outcoming",attrs:{props:e}},[t._v("\n                        "+t._s(t.miles(e.row.outcoming))+"\n                      ")])],1)]}},{key:"bottom-row",fn:function(){return[a("q-tr",[a("q-td",{key:"detail",staticClass:"text-center"},[a("b",[t._v("Total")])]),a("q-td",{key:"incoming"}),a("q-td",{key:"outcoming",staticClass:"text-center"},[a("b",[t._v(t._s(t.miles(t.totalComparativeTable)))])])],1)]},proxy:!0}],null,!1,1453338855)}),a("highcharts",{attrs:{options:t.chartOptionsIngresosVsGastos}})],1):t._e()]),a("div",{staticClass:"col-1"})])])])},n=[],r=(a("7db0"),a("96cf"),a("c973")),s=a.n(r),i=a("9f21"),l=a("4452"),c=a("bd4c"),u={name:"analysis",mixins:[i["a"]],components:{highcharts:l["Chart"]},data:function(){return{totalIngresosComparative:0,totalGastosComparative:0,date:c["b"],valuesMonthSelected:null,dataTiposPorMes:[],totalComparativeTable:0,columnsComparativeTable:[{name:"detail",align:"center",label:"Nombre",field:"detail",sortable:!0},{name:"incoming",align:"center",label:"Debitos",field:"incoming",sortable:!0},{name:"outcoming",align:"center",label:"Creditos",field:"outcoming",sortable:!0}],dataCompativeTable:[],monthSelected:{value:0,label:"Enero"},options:[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],dataTipos:[],dataGastos:[],chartOptionsGastosPorDiaDelMes:{chart:{type:"area"},title:{text:"Gastos este mes"},xAxis:{title:{text:"Dias"},categories:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},yAxis:{title:{text:"Valor"}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1},area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#E9BC36"]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{name:"Gastos",data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],color:"#E9BC36"}]},chartOptionsGastosPorCategoria:{chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}: {point.percentage:.1f}%"},showInLegend:!0}},colorAxis:{minColor:"#F2f2f2",maxColor:"#E9BC36"},series:[{colorByPoint:!0,data:[{name:"",value:"1",color:"#E9BC36"}]}],title:{text:"Gastos por categoria"}},chartOptionsIngresosVsGastos:{chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.name}: {point.percentage:.1f}%"},showInLegend:!0}},colorAxis:{minColor:"#F2f2f2",maxColor:"#E9BC36"},series:[{colorByPoint:!0,data:[{name:"",value:"1",color:"#E9BC36"}]}],title:{text:"Ingresos vs Gastos"}}}},mounted:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c["b"].formatDate(new Date,"M"),o=t.options.find((function(t){return t.value===parseInt(a)})),t.monthSelected=o,e.next=5,t.init();case 5:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:t.organiceByType(),t.organiceByMonth(),t.fillTable(),t.generateChartComparative();case 6:case"end":return e.stop()}}),e)})))()},fillTable:function(){this.dataCompativeTable=[],this.totalComparativeTable=0;for(var t=this.valuesMonthSelected.incoming,e=this.dataTiposPorMes,a=0;a<t.length;a++)this.dataCompativeTable.push({detail:t[a].nombre,incoming:t[a].valor,outcoming:0}),this.totalIngresosComparative+=parseInt(t[a].valor);for(var o=0;o<e.length;o++)this.dataCompativeTable.push({detail:e[o].nombre,outcoming:e[o].valor,incoming:0}),this.totalGastosComparative+=parseInt(e[o].valor);this.totalComparativeTable=parseInt(this.totalIngresosComparative)-parseInt(this.totalGastosComparative)},getData:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getDataCollection("tipos","id","desc");case 2:return t.dataTipos=e.sent,e.next=5,t.getDataCollection("gastos","id","desc");case 5:return t.dataGastos=e.sent,e.next=8,t.getDataCollection("ingresos","id","desc");case 8:t.dataIngresos=e.sent,t.valuesMonthSelected=t.selectMonth();case 10:case"end":return e.stop()}}),e)})))()},organiceByType:function(){this.chartOptionsGastosPorCategoria.series[0].data=[];for(var t=0;t<this.dataTipos.length;t++){this.dataTiposPorMes[t]={id:this.dataTipos[t].id,valor:0,nombre:this.dataTipos[t].nombre,color:this.dataTipos[t].color};for(var e=0;e<this.valuesMonthSelected.outcoming.length;e++)this.dataTiposPorMes[t].id===this.valuesMonthSelected.outcoming[e].tipo.id&&(this.dataTiposPorMes[t].valor+=parseInt(this.valuesMonthSelected.outcoming[e].valor));this.chartOptionsGastosPorCategoria.series[0].data.push({name:this.dataTiposPorMes[t].nombre,y:this.dataTiposPorMes[t].valor,color:this.dataTiposPorMes[t].color})}},generateChartComparative:function(){this.chartOptionsIngresosVsGastos.series[0].data=[],this.chartOptionsIngresosVsGastos.series[0].data.push({name:"Ingresos",y:this.totalIngresosComparative,color:"#21BA45"}),this.chartOptionsIngresosVsGastos.series[0].data.push({name:"Gastos",y:this.totalGastosComparative,color:"#FF0000"})},organiceByMonth:function(){for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<this.valuesMonthSelected.outcoming.length;e++){var a=new Date(this.valuesMonthSelected.outcoming[e].fecha),o=a.getUTCDate()-1;0===t[o]?t[o]=parseInt(this.valuesMonthSelected.outcoming[e].valor):t[o]+=parseInt(this.valuesMonthSelected.outcoming[e].valor)}this.chartOptionsGastosPorDiaDelMes.series[0].data=t},selectMonth:function(){var t=[],e=[];c["b"].formatDate(new Date,"M");for(var a=0;a<this.dataGastos.length;a++)parseInt(c["b"].formatDate(new Date(this.dataGastos[a].fecha),"M"))===this.monthSelected.value&&t.push(this.dataGastos[a]);for(var o=0;o<this.dataIngresos.length;o++)parseInt(c["b"].formatDate(new Date(this.dataIngresos[o].fecha),"M"))===this.monthSelected.value&&e.push(this.dataIngresos[o]);return{incoming:e,outcoming:t}}}},d=u,h=a("2877"),p=a("9989"),m=a("ddd8"),g=a("0016"),v=a("eaac"),f=a("bd08"),b=a("db86"),C=a("eebe"),w=a.n(C),x=Object(h["a"])(d,o,n,!1,null,null,null);e["default"]=x.exports;w()(x,"components",{QPage:p["a"],QSelect:m["a"],QIcon:g["a"],QTable:v["a"],QTr:f["a"],QTd:b["a"]})}}]);